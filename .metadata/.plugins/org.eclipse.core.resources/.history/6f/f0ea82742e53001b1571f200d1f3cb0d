package UI;

import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;

import Main.Main;
import Tetris.Tetris;

public class UpdateBoard extends Thread {
	JPanel board;
	JLabel jlBlock[][];
	JLabel jlNext;
	JLabel jlScore;
	JLabel jlTimer;
	
	public int time;
	ImageIcon iiBlock[];
	Tetris t;

	UpdateBoard(JPanel board, JLabel jlBlock[][], JLabel jlNext, JLabel jlScore, JLabel jlTimer, Tetris t) {
		this.board = board;
		this.jlBlock = jlBlock;
		this.jlNext = jlNext;
		this.jlScore = jlScore;
		this.jlTimer = jlTimer;
		this.t = t;
		time=0;
		iiBlock = new ImageIcon[8];
		iiBlock[0] = new ImageIcon("black_block.png");
		iiBlock[1] = new ImageIcon("blue_block.png");
		iiBlock[2] = new ImageIcon("green_block.png");
		iiBlock[3] = new ImageIcon("orange_block.png");
		iiBlock[4] = new ImageIcon("purple_block.png");
		iiBlock[5] = new ImageIcon("red_block.png");
		iiBlock[6] = new ImageIcon("sky_block.png");
		iiBlock[7] = new ImageIcon("yellow_block.png");
	}

	public void run() {
		int timeTmp=0;
		while (Main.isRun) {
			for (int i = 1; i < t.sum.length; i++) {
				for (int j = 0; j < t.sum[0].length; j++) {
					jlBlock[i - 1][j].setIcon(iiBlock[t.sum[i][j]]);
				}
			}
			jlScore.setText("Score : "+t.score);
			if(timeTmp==1000) {
				timeTmp=0;
				time++;
			}
			jlTimer.setText("time : "+time);
			board.revalidate();
			board.repaint();
			try {
				sleep(1);
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
	}
}
